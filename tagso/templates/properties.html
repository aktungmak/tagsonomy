{% extends "base.html" %}

{% block title %}Tagsonomy | Properties{% endblock %}

{% block content %}
<input type="search" data-filter-for="property_list" value="{{ property_uri }}" placeholder="Search for properties...">

<ul id="property_list">
    {% for property in properties %}
    <li>
        <span data-searchable hidden>{{ property.alt_labels | join(' ') }}</span>
        <div>
            <b>URI:</b> <span data-searchable>{{ property.uri | safe }}</span>
        </div>
        <div>
            <b>Label:</b> <span data-searchable>{{ property.name | safe }}</span>
        </div>
        {% if property.alt_labels %}
        <div>
            <b>Alternative Labels:</b> {{ property.alt_labels | join(', ') | safe }}
        </div>
        {% endif %}
        <a href="{{ url_for('properties.property_edit_get', uri=property.uri) }}"><button type="button">View /
                Edit</button></a>
        <button data-delete data-url="{{ url_for('properties.property_delete') }}" data-type="property"
            data-uri="{{ property.uri }}">Delete</button>
        <a href="{{ url_for('assign.assign_get', selected_property_uri=property.uri) }}"><button
                type="button">Assign</button></a>
    </li>
    {% endfor %}
</ul>

<hr />

<h2>New Property</h2>
<form action="{{ url_for('properties.properties_post') }}" method='post'>
    <label for="name">Property label:</label>
    <input type="text" name="name" id="name" required />

    <label for="uri">Property IRI (optional):</label>
    <input type="text" name="uri" id="uri" />

    <label for="domain">Domain (optional):</label>
    <select name="domain" id="domain">
        <option value="">— None —</option>
        {% for concept in concepts %}
        <option value="{{ concept.uri }}">{{ concept.label or concept.uri }}</option>
        {% endfor %}
    </select>

    <label for="range">Range (optional):</label>
    <select name="range" id="range">
        <option value="">— None —</option>
        {% for concept in concepts %}
        <option value="{{ concept.uri }}">{{ concept.label or concept.uri }}</option>
        {% endfor %}
    </select>

    <label>Alternative Labels (skos:altLabel):</label>
    <div id="new_property_alt_labels_container"></div>
    <button type="button" data-add-alt-label="new_property_alt_labels_container">Add Alternative Label</button>

    <input type="submit" value="Create" />
</form>
{% endblock %}